<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game</title>
    <link rel="stylesheet" href="styles.css">

</head>
<body>
<div class="game-filed">
    <div id="102" class="card-back"></div>
    <div id="103" class="card-back"></div>
    <div id="104" class="card-back"></div>
    <div id="105" class="card-back"></div>
    <div id="106" class="card-back"></div>
    <div id="107" class="card-back"></div>
    <div id="108" class="card-back"></div>
    <div id="109" class="card-back"></div>
    <div id="110" class="card-back"></div>
    <div id="111" class="card-back"></div>
    <div id="112" class="card-back"></div>
    <div id="113" class="card-back"></div>
    <div id="114" class="card-back"></div>

    <div id="202" class="card-back"></div>
    <div id="203" class="card-back"></div>
    <div id="204" class="card-back"></div>
    <div id="205" class="card-back"></div>
    <div id="206" class="card-back"></div>
    <div id="207" class="card-back"></div>
    <div id="208" class="card-back"></div>
    <div id="209" class="card-back"></div>
    <div id="210" class="card-back"></div>
    <div id="211" class="card-back"></div>
    <div id="212" class="card-back"></div>
    <div id="213" class="card-back"></div>
    <div id="214" class="card-back"></div>

    <div id="302" class="card-back"></div>
    <div id="303" class="card-back"></div>
    <div id="304" class="card-back"></div>
    <div id="305" class="card-back"></div>
    <div id="306" class="card-back"></div>
    <div id="307" class="card-back"></div>
    <div id="308" class="card-back"></div>
    <div id="309" class="card-back"></div>
    <div id="310" class="card-back"></div>
    <div id="311" class="card-back"></div>
    <div id="312" class="card-back"></div>
    <div id="313" class="card-back"></div>
    <div id="314" class="card-back"></div>

    <div id="402" class="card-back"></div>
    <div id="403" class="card-back"></div>
    <div id="404" class="card-back"></div>
    <div id="405" class="card-back"></div>
    <div id="406" class="card-back"></div>
    <div id="407" class="card-back"></div>
    <div id="408" class="card-back"></div>
    <div id="409" class="card-back"></div>
    <div id="410" class="card-back"></div>
    <div id="411" class="card-back"></div>
    <div id="412" class="card-back"></div>
    <div id="413" class="card-back"></div>
    <div id="414" class="card-back"></div>

</div>

<script>
    var cardId = [102, 103, 104, 105, 106];
    var cards = ["102", "103", "104", "105", "106"];

    var Card = function(id) {
        this.id = id;
        this.isVisible = false;
        //status:
        // 0 - stack,
        // 1 - first hand,
        // 2 - second hand,
        // 3 - out
        this.status = 0;
    }

    const FIRST_HAND_OFFSET_X = 100;
    const FIRST_HAND_OFFSET_Y = 200;
    const SECOND_HAND_OFFSET_X = 100;
    const SECOND_HAND_OFFSET_Y = 0;
    const CARD_HAND_WIDTH = 75;

    var allCards = [];
    var cards = [];
    var allCardsString = [];
    var firstHand = [];
    var secondHand = [];
    var status = {};

    var stackSetup = function (){
        console.log("stack setup");

        for(var i = 1; i<5; i++) {
            for(var j=2;j<15;j++) {
                allCards.push(i * 100 + j);
                allCardsString.push(i*100 + j + "");
                cards.push(new Card(i * 100 + j));
            }
        }

    }

    function shuffle(array) {
        let counter = array.length;

        // While there are elements in the array
        while (counter > 0) {
            // Pick a random index
            let index = Math.floor(Math.random() * counter);

            // Decrease counter by 1
            counter--;

            // And swap the last element with it
            let temp = array[counter];
            array[counter] = array[index];
            array[index] = temp;
        }

        return array;
    }


    var relayoutStack =  function() {
        console.log("stack relayout");
        for (var i = 0; i < 52; i++) {
            var el = document.getElementById(allCardsString[i]);
            console.log(el);
            el.style.top = (i * 2) + "px";
            el.style.left = (i * 2) + "px";
            //console.log("el style: " + el.style);
            //console.log("el top: " + el.style.top);
        }
    }

    var moveToFirstHand = function() {
        console.log("move to first hand");
        for(var i=0;i<6;i++) {
            console.log(cards[46+i]);
            cards[46 + i].status = 1;
        }
    }

    var moveToSecondHand = function() {
        console.log("move to second hand");
        for(var i=0;i<6;i++) {
            console.log(cards[40+i]);
            cards[40 + i].status = 2;
        }
    }

    var renderFirstHand = function() {
        console.log("render first hand");
        var localCounter = 0;
        for(var i=0;i<52;i++){
            if(cards[i].status===1) {
                //firstHand.push(i);
                localCounter++;
                var el = document.getElementById(cards[i].id);
                console.log(el);
                el.style.left = FIRST_HAND_OFFSET_X + localCounter * CARD_HAND_WIDTH+"px";
                el.style.top = FIRST_HAND_OFFSET_Y+"px";
                console.log(el);
            }
        }
        //console.log(firstHand);
    }

    var renderSecondHand = function() {
        console.log("render second hand");
        var localCounter = 0;
        for(var i=0;i<52;i++){
            if(cards[i].status===2) {
                //firstHand.push(i);
                localCounter++;
                var el = document.getElementById(cards[i].id);
                console.log(el);
                el.style.left = SECOND_HAND_OFFSET_X + localCounter * CARD_HAND_WIDTH+"px";
                el.style.top = SECOND_HAND_OFFSET_Y+"px";
                console.log(el);
            }
        }
    }


    stackSetup();
    relayoutStack();
    console.log("before shuffle");
    console.log(allCards);

    //console.log("after shuffle");
    //console.log(shuffle(allCards));

    moveToFirstHand();
    moveToSecondHand();
    renderFirstHand();
    renderSecondHand();

    var testCard = new Card(111);
    //console.log(testCard);
    //console.log(cards)





</script>
</body>
</html>